<!DOCTYPE html>

<html data-wf-domain="www.yuhuiqi.com">
	<head>
        <link rel="stylesheet" href="https://use.typekit.net/wvs7ihr.css"> 
        <!--font-family: "futura-pt", sans-serif; font-weight: 600; font-style: normal;-->
        <!--font-family: "linotype-didot", serif; font-weight: 700; font-style: normal;-->
		<meta charset="utf-8">
		<title>
			Dollar Flip
		</title>
		<meta content="width=device-width, initial-scale=1" name="viewport">
		<link href="static/css/project-page.css" rel="stylesheet" type="text/css">
	</head>

	<body class="works-block-body">

        <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navigation-bar w-nav">
            <div class="navbar-container w-container">
                <a href="index.html" class="brand-link w-nav-brand">
                    <div class="nav-brand-link">
                        YUHUI
                    </div>
                </a>
                <nav role="navigation" class="navigation-menu w-nav-menu">
                    <a href="index.html" class="navigation-link w-nav-link">
                        works
                    </a>
                    <a href="playground.html" class="navigation-link w-nav-link">
                        playground
                    </a>
                    <a href="https://drive.google.com/file/d/1GDh7A0q2EPbzfSmEoDu2TpZeVoKFcZbh/view?usp=sharing" target="_blank" class="navigation-link w-nav-link">
                        resume
                    </a>    
                    <a href="about.html" class="navigation-link w-nav-link">
                        About
                    </a>
                </nav>
                <div class="hamburger-button w-nav-button">
                    <div class="icon w-icon-nav-menu">
                    </div>
                </div>
            </div>
        </div>

		<div class="bgcanvas">
			<div class="w-embed">
				<canvas class="bgCanvas project1" id="glcanvas">
				</canvas>
			</div>
		</div>

		<header class="project-page-hero wf-section">
			<div class="project-title-container">
				<div class="project-hero-title">
					Dollar Flip
				</div>
			</div>
			<div class="project-infocol-container w-row">
				<div class="column-projectinfo w-col w-col-5">
					<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a82a-bd42a7ff" class="project-hero-intro">
						Redefining Second-hand Trading in North America. Now Launched!
						<br>
						<br>
					</div>
					<div class="project-metainfo w-row">
						<div class="w-col w-col-6 w-col-small-6 w-col-tiny-6">
							<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a805-bd42a7ff" class="project-metainfo-container">
								<div class="project-metainfo-tag">
									Type
								</div>
								<div class="project-metainfo-data">
									UX/UI<br>User Research<br>Visual Design<br>Interaction Design<br>Usability Testing
								</div>
							</div>
							<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a80e-bd42a7ff" class="project-metainfo-container">
								<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a80f-bd42a7ff" class="project-metainfo-tag">
									Tools
								</div>
								<div class="project-metainfo-data">
									Figma<br>Adobe Illustrator<br>Adobe Photoshop
								</div>
							</div>
						</div>
						<div class="w-col w-col-6 w-col-small-6 w-col-tiny-6">
							<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a817-bd42a7ff" class="project-metainfo-container">
								<div color="#00FFFF" class="project-metainfo-tag">
									Year
								</div>
								<div class="project-metainfo-data">
									2024
									<br><br>
								</div>
							</div>
							<div class="project-metainfo-container">
								<div class="project-metainfo-tag">
									Role
								</div>
								<div class="project-metainfo-data">
									Product Manager<br>UI Design<br>UX Design
									<br><br>
								</div>
							</div>
							<!--<div class="project-metainfo-container">
								<div class="project-metainfo-tag">
									Collaborator
								</div>
								<div class="project-metainfo-data">
									Yongning Ding
								</div>
							</div>-->
						</div>
					</div>
				</div>
				<div class="column-projectcover w-col w-col-7">
					<img src="static/picture/douller-cover.png" loading="lazy"
					alt="" sizes="(max-width: 479px) 67vw, (max-width: 767px) 83vw, (max-width: 991px) 50vw, (max-width: 5714px) 56vw, 3200px"
					class="project-coverimg">
				</div>
			</div>
		</header>





























        <div class="page-container"  style="padding-top: 100px;">

            <div class="page-unit"> 
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 01 <span style="color: rgb(89, 39, 239);"> OVERVIEW </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Dollar Flip, an innovative second-hand trading app, is poised to meet the burgeoning demand for pre-owned goods in the North American market. In today's age, characterized by a growing emphasis on sustainability and resource sharing, Dollar Flip emerges as a beacon of convenience and reliability. This platform provides users with a seamless experience to buy and sell a diverse array of second-hand items, ranging from furniture to electronics to clothing. Dollar Flip aspires to establish itself as the premier second-hand trading platform in North America, offering users unparalleled convenience and security while championing the principles of resource sharing and sustainability.
                </div>
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 02 <span style="color: rgb(89, 39, 239);"> RESEARCH AND ANALYSIS </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Through thorough research and analysis of the global regional market outlook for second-hand products, we've uncovered significant insights. 
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">1 / Survey: </a>The North American second-hand market is rapidly growing due to the abundance of high-quality items no longer needed by their original owners. Consumers frequently refresh their belongings, contributing to the continuous circulation of top-notch second-hand goods through donations or sales. By 2024, North America is poised to remain one of the most attractive markets globally, fueled by sustained demand for second-hand goods in the region.                </div>
            </div>
            <div class="page-unit" style="padding-top: 20px;">
                <div class="page-sec"></div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    <img src="static/picture/douller-research-01.png" alt="Your Image" style="max-width: 100%;"  style="padding-bottom: -100px;">
                </div>
            </div>

            <div class="page-unit">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">    
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">2 / Cometitive Analysis: </a>competitive analysis was conducted focusing on these prominent participants in the global second-hand goods industry, including eBay, Facebook Marketplace, OfferUp, Depop, Poshmark, ThreadUp, Tradesy, etc.
                    <br><br><br>
                </div>
            </div>
            <div style="display: flex; justify-content: space-between; max-width: auto; margin: 0 auto; padding-top: 20px;">
                <div style="width: 23%; display: flex; flex-direction: column; align-items: center;">
                    <img src="static/picture/ebay-logo.png" alt="eBay Logo" style="max-width: 50%;">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; text-align: center; padding-top: 10px;">
                        A globally renowned e-commerce giant, offering a array of new and used products, with a massive user base and unparalleled global reach.
                    </p>
                </div>
                <div style="width: 23%; display: flex; flex-direction: column; align-items: center;">
                    <img src="static/picture/facebook-logo.png" alt="Facebook Logo" style="max-width: 50%;">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; text-align: center; padding-top: 10px;">
                        Integrated within the social media platform, it enables local buying and selling, tapping into Facebook's extensive user network.
                    </p>
                </div>
                <div style="width: 23%; display: flex; flex-direction: column; align-items: center;">
                    <img src="static/picture/offerup-logo.png" alt="OfferUp Logo" style="max-width: 50%;">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; text-align: center; padding-top: 10px;">
                        Known for its user-friendly interface, this local marketplace facilitates trading second-hand items within communities.
                    </p>
                </div>
                <div style="width: 23%; display: flex; flex-direction: column; align-items: center;">
                    <img src="static/picture/depop-logo.png" alt="Depop Logo" style="max-width: 50%;">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; text-align: center; padding-top: 10px;">
                        Catering to fashion-forward users, it specializes in second-hand clothing, accessories, and beauty products, with a focus on social engagement.
                    </p>
                </div>
            </div>
            <div style="flex: 1; display: flex; justify-content: center; padding-top: 70px; padding-bottom: 20px;">
                <img src="static/picture/douller-swot.png" style="max-width: 65%;">
            </div>
            

            <div class="page-unit">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">    
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">3 / Personas and Questionnaire: </a>The development of personas and questionnaire analysis has provided valuable insights into user behavior and preferences, informing the UX design process.
                </div>
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <div style="display: flex; justify-content: center;">
                    <img src="static/picture/douller-persona-01.png" alt="Your Image" style="max-width: 100%;">
                </div>
                <div style="display: flex; justify-content: center;">
                    <img src="static/picture/douller-persona-02.png" alt="Your Image" style="max-width: 100%;">
                </div>
            </div>

        </div>
            

        <div class="page-container">
            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                     / 03 <span style="color: rgb(89, 39, 239);"> IDEATION </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Introducing Dollar Flip: an innovative second-hand trading app poised to meet the growing demand for pre-owned goods in North America. In today's sustainability-focused age, Dollar Flip offers a seamless platform for users to buy and sell a diverse array of items, from furniture to electronics to clothing. To establish Dollar Flip as the premier second-hand trading platform in North America, providing unparalleled convenience and security while promoting resource sharing and sustainability principles. <a style="color: rgb(89, 39, 239);">Userflow</a> is shown below:
                </div>
            </div>
            <div style="display: flex; justify-content: center;">
                <img src="static/picture/douller-ideation.png" style="width: 80%; height: auto; padding-top:80px; padding-bottom: 70px;">
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 04 <span style="color: rgb(89, 39, 239);"> INITIAL DESIGN </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Based on extensive research findings, the development process for Dollar Flip began with the creation of initial design concepts. This involved producing sketches, wireframes, and prototypes to explore a range of design ideas and solutions quickly. The main focus at that stage was to iterate on the designs rapidly, ensuring they aligned with user needs and market trends. By leveraging data-driven insights and user feedback, the initial design concepts were refined to establish a solid foundation for the Dollar Flip app's user interface and user experience. <a style="color: rgb(89, 39, 239);">Low-Fidelity iterations</a> are shown below:
                </div>
            </div>
            <img src="static/picture/douller-wireframing.png" style="width: 100%; height: auto; padding-top:80px; padding-bottom: 20px;">

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 05 <span style="color: rgb(89, 39, 239);"> USER TESTING </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Following the creation of prototype sketches, several individuals were enlisted for user testing using prototypes or simulators to gather feedback and make adjustments and optimizations to the design. This step aimed to gain insights into the design, facilitating improvements for a better user experience in the final wireframe and user flow. <a style="color: rgb(89, 39, 239);">Testing takeaways</a> are listed below:
                </div>
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/douller-usertesting.png" style="width: 65%; height: auto; padding-top:80px; padding-bottom: 50px;">
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 06 <span style="color: rgb(89, 39, 239);"> DETAILED DESIGN </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Once the best design solution is identified, begin detailed UI design work, including designing interface elements, colors, fonts, etc. The goal at this stage is to ensure the design's usability and aesthetics.
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">1 / Color scheme: </a>The carefully selected color scheme of Delft Blue, Cool Gray, White, Jasmine, and Platinum enhances the second-hand trading app in several ways. Delft Blue captures attention, while Cool Gray and Platinum evoke professionalism and trustworthiness, fostering user confidence. Jasmine and White ensure clear and readable interface content. Together, these colors elevate the app's visual appeal and contribute to a seamless user experience.
                    <br><br><br>
                    <div style="flex: 1; display: flex; justify-content: center;">
                        <img src="static/picture/douller-color.png" alt="Your Image" style="max-width: 80%;"  style="padding-bottom: -100px;">
                    </div>
                </div>
            </div>
            <div class="page-unit">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">    
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">2 / Logo design: </a>The logo concept for Dollar Flip, a company primarily engaged in the realm of lifestyle services with a focus on second-hand transactions, artfully intertwines the letter 'D', symbolizing the company's name, with the imagery of a lasso. This creative design mirrors the user experience on this platform, where individuals can figuratively rope in the products they desire within the world of second-hand trading.
                    <br><br><br>
                    <div style="flex: 1; display: flex; justify-content: center;">
                        <img src="static/picture/douller-logo.png" alt="Your Image" style="max-width: 90%;"  style="padding-bottom: -100px;">
                    </div>
                </div>
            </div>
            <div class="page-unit">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">        
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">3 / Icon design: </a>Designing and finalizing icons for various functions within the application, ensuring they are clear, recognizable, and consistent with the overall interface style.
                </div>
            </div>
            <div class="page-unit">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">    
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">4 / Typography: </a>Determining the font, size, color, and arrangement of text to ensure clarity and readability of interface information.
                    <br><br><br>
                    <div style="flex: 1; display: flex; justify-content: center;">
                        <img src="static/picture/douller-font.png" alt="Your Image" style="max-width: 75%;"  style="padding-bottom: -100px;">
                    </div>
                </div>
            </div>
            <div class="page-unit">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">        
                    <br><br>
                    <a style="color: rgb(89, 39, 239);">5 / Interface layout, visual elements, and user interaction design: </a>This encompasses designing the overall structure and appearance of the interface, including the layout, visual elements, and user interaction elements, to ensure a seamless and intuitive user experience. Use the <a href="https://www.figma.com/proto/Wn7aoIGM2CqbbsDAPxR8kN/Douller?type=design&node-id=340-795&t=SfHK1hiWNuSqgEtc-1&scaling=scale-down&page-id=340%3A754&starting-point-node-id=340%3A773&mode=design" target="_blank" style="color: rgb(253, 135, 135);">link</a> to play with it.
                </div>
            </div>
            <div style="display: flex; align-items: center; max-width: auto; margin: 0 auto; padding-top:80px; padding-bottom: 80px;">
                <div style="flex: 1; display: flex; justify-content: center;">
                    <img src="static/picture/douller-app-01.gif" alt="Your Image" style="max-width: 80%;">
                </div>
                <div style="flex: 1; display: flex; ">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; max-width: 80%;">
                        <a style="color: rgb(84, 87, 156);">1 - Create Account</a>
                        <br><br>
                        Seamlessly register an account to initiate your journey within the second-hand marketplace.
                    </p>
                </div>
                <div style="flex: 1; display: flex; justify-content: center;">
                    <img src="static/picture/douller-app-02.gif" alt="Your Image" style="max-width: 80%;">
                </div>
                <div style="flex: 1; display: flex; ">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; max-width: 80%;">
                        <a style="color: rgb(84, 87, 156);">2 - Main page</a>
                        <br><br>
                        Explore a diverse array of items and quickly locate those that capture your interest.
                    </p>
                </div>
            </div>
            <div style="display: flex; align-items: center; max-width: auto; margin: 0 auto; padding-bottom: 80px;">
                <div style="flex: 1; display: flex; justify-content: center;">
                    <img src="static/picture/douller-app-03.gif" alt="Your Image" style="max-width: 80%;">
                </div>
                <div style="flex: 1; display: flex; ">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; max-width: 80%;">
                        <a style="color: rgb(84, 87, 156);">3 - Post and discussion</a>
                        <br><br>
                        Participate in discussions, share your posts and opinions, and engage with other users to exchange experiences and insights.
                    </p>
                </div>
                <div style="flex: 1; display: flex; justify-content: center;">
                    <img src="static/picture/douller-app-04.gif" alt="Your Image" style="max-width: 80%;">
                </div>
                <div style="flex: 1; display: flex; ">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; max-width: 80%;">
                        <a style="color: rgb(84, 87, 156);">4 - Publish</a>
                        <br><br>
                        Effortlessly list your second-hand items for sale or share your thoughts to attract attention and interact with other users.
                    </p>
                </div>
            </div>
            <div style="display: flex; align-items: center; max-width: auto; margin: 0 auto; padding-bottom: 80px;">
                <div style="flex: 1; display: flex; justify-content: center;">
                    <img src="static/picture/douller-app-05.gif" alt="Your Image" style="max-width: 80%;">
                </div>
                <div style="flex: 1; display: flex; ">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; max-width: 80%;">
                        <a style="color: rgb(84, 87, 156);">5 - Message</a>
                        <br><br>
                        Communicate with other users in real-time, discuss transaction details, and ensure smooth transactions.
                    </p>
                </div>
                <div style="flex: 1; display: flex; justify-content: center;">
                    <img src="static/picture/douller-app-06.gif" alt="Your Image" style="max-width: 80%;">
                </div>
                <div style="flex: 1; display: flex; ">
                    <p style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal; max-width: 80%;">
                        <a style="color: rgb(84, 87, 156);">6 - My Dollar Flip</a>
                        <br><br>
                        Access and manage your personal information, including posted items, discussions, received messages, and transaction history.
                    </p>
                </div>
            </div>
            

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 07 <span style="color: rgb(89, 39, 239);"> DEVELOPMENT AND IMPLEMENTATION </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Translate the design into deliverable products, work closely with the development team to ensure the design is implemented as expected.
                </div>
            </div>
            <img src="static/picture/douller-development.png" style="width: 100%; height: auto; padding-top:80px; padding-bottom: 20px;">

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 08 <span style="color: rgb(89, 39, 239);"> TESTING AND OPTIMIZATION </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Testing was conducted before and after product launch, user feedback was gathered, and the product was continuously optimized. This ensured product quality and user satisfaction.
                    <br><br>
                    <img src="static/picture/douller-testing.png" alt="Your Image" style="max-width:100%;padding-top: 20px;">
                    <br><br>
                    <p style="padding-top: 20px;">Adjustments were made incrementally based on user feedback regarding the details.</p>
                </div>
            </div>

            <div class="page-unit" style="padding-top: 150px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 09 <span style="color: rgb(89, 39, 239);"> DEPLOYMENT AND RELEASE </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    After completing all testing and optimization, the product was deployed and released to users. Continuous monitoring and tracking of the product's performance ensued, accompanied by necessary adjustments and updates. <a style="color: rgb(253, 135, 135);"> Data analysis revealed a significant increase in user engagement following the new version update.</a>
                </div>
            </div>

        </div>

        <div style="padding-top: 250px;"></div>



























        
		<div class="footer wf-section">
			<div class="footer-text">
				Copyright © YUHUI QI 2023
			</div>
		</div>



		<script src="static/js/jquery-3.5.1.min.dc5e7f18c8.js" type="text/javascript"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
		</script>
		<script src="static/js/webflow.87852ad41.js" type="text/javascript">
		</script>



		<script>
		const canvas = document.querySelector('.bgCanvas');

console.log(canvas.classList[1]);
let projects = document.querySelectorAll(".project-li");

canvas.width = window.innerWidth;
  //if canvas.classList.include("project"),canvas.height=window.innerHeight*1.3;
canvas.height = window.innerHeight*1.24;

//////////////////////////////////////////////
// vertex shader program 
const VS_SOURCE = `
    precision highp float;
    
    attribute vec4 aVertexPosition;
    
    void main(void) {
      gl_Position = aVertexPosition;
    }
`;

//////////////////////////////////////////////
//  fragment shader program
const FS_SOURCE = `
precision highp float;

uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;
uniform vec3 u_color1;
uniform vec3 u_color2;
uniform vec3 u_color3;


vec3 mod289(vec3 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec2 mod289(vec2 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec3 permute(vec3 x) {
    return mod289(((x * 34.0) + 1.0) * x);
}
vec2 random2(vec2 st) {
    st = vec2(dot(st, vec2(97.1, 311.7)),
        dot(st, vec2(69.5, 183.3)));

    return -1.0 + 2.0 * fract(sin(st) * 43758.5453123);
}

float map(float value, float min1, float max1, float min2, float max2) {
    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float snoise(vec2 v) {
    const vec4 C = vec4(0.211324865405187, // (3.0-sqrt(3.0))/6.0
        0.366025403784439, // 0.5*(sqrt(3.0)-1.0)
        -0.577350269189626, // -1.0 + 2.0 * C.x
        0.024390243902439); // 1.0 / 41.0
    vec2 i = floor(v + dot(v, C.yy));
    vec2 x0 = v - i + dot(i, C.xx);
    vec2 i1;
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;
    i = mod289(i); // Avoid truncation effects in permutation
    vec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0)) +
        i.x + vec3(0.0, i1.x, 1.0));

    vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);
    m = m * m;
    m = m * m;
    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;
    m *= 1.79284291400159 - 0.85373472095314 * (a0 * a0 + h * h);
    vec3 g;
    g.x = a0.x * x0.x + h.x * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

void main() {
    vec2 st = gl_FragCoord.xy / u_resolution.xy;
    st.x *= u_resolution.x / u_resolution.y;
    st.y += 0.5;

    vec3 color = vec3(0.625, 0.205, 0.235);
    float xoff = snoise(st + u_time * .015) * u_mouse.y / u_resolution.y * 0.1;
    vec2 pos = vec2(st * vec2(1., 2.2) * map(u_mouse.x, 0., u_resolution.x, 0.3, 0.4));


    float DF = 0.;

    // Add a random position
    vec2 vel = vec2(20.3, 0.6);
    DF += snoise(pos + vel) * map(u_mouse.x, 0., u_resolution.x, 0.2, 0.8);

    // Add a random position
    vel = vec2(u_mouse / u_resolution * 0.9);
    DF += snoise(pos + vel) * map(u_mouse.x, 0., u_resolution.x, 0.1, 0.8);
    DF += 0.37;
    vec3 color0 = vec3(0.0, 0.0, 0.0);
    vec3 color1 = vec3(0.9529, 0.3647, 0.1333);
    vec3 color2 = vec3(0.6902, 0.7255, 0.6549);
    vec3 color3 = vec3(0.1765, 0.3333, 0.7608);

    color = mix(color0, u_color1, smoothstep(0.1, 0.4, DF));
    color = mix(color, u_color2, smoothstep(0.3, 0.5, DF));
    color = mix(color, u_color3, smoothstep(0.4, 0.6, DF));
    color = mix(color, color0, smoothstep(0.4, 0.8, DF));


    //  color = vec3(smoothstep(.5, .75, fract(DF)));
    color += vec3(snoise(random2(st)) * 0.05);
    //color *= 0.1;


    gl_FragColor = vec4(color, 1.0);
}
`;


function initShaderProgram(gl, vsSource, fsSource) {
    const vertexshader = loadShader(gl, gl.VERTEX_SHADER, vsSource);
    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fsSource);

    // Create the shader program and link fragment and vertex shader
    const shaderProgram = gl.createProgram();
    gl.attachShader(shaderProgram, vertexshader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    // If creating the shader program failed, alert
    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));
        return null;
    }
    return shaderProgram;
}
function loadShader(gl, type, source) {
    const shader = gl.createShader(type);

    // Send the source to the shader object
    gl.shaderSource(shader, source);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));
        gl.deleteShader(shader);
        return null;
    }
    return shader;
}
  
class BGColor {
    constructor() {
        this.switch = false;
     
        //current color pattern with three colors
        this.current = [
           // [0.9529, 0.3647, 0.1333],
           // [0.6902, 0.7255, 0.6549],
           // [0.1765, 0.3333, 0.7608]
             [0.7333, 0.302, 0.1451],
                    [0.5098, 0.6824, 0.5765],
                    [0.0941, 0.1294, 0.2627]
        ];
        this.target = [
          //  [0.9529, 0.3647, 0.1333],
          //  [0.6902, 0.7255, 0.6549],
          //  [0.1765, 0.3333, 0.7608]
             [0.7333, 0.302, 0.1451],
                    [0.5098, 0.6824, 0.5765],
                    [0.0941, 0.1294, 0.2627]
        ];
        //static
        this.colorPatternList = [
            {
                index: 0,//defualt
                id:"default",
                color: [
                    // [0.9529, 0.3647, 0.1333],
                    // [0.6902, 0.7255, 0.6549],
                    // [0.1765, 0.3333, 0.7608]
                    [0.7333, 0.302, 0.1451],
                    [0.5098, 0.6824, 0.5765],
                    [0.0941, 0.1294, 0.2627]
                ]
            },
          
            {
                index: 1,
                id:"mindful mood space",
                color: [
                    [0.233, 0.193, 0.241],
                    [0.203, 0.181, 0.246],
                    [0.114, 0.140, 0.218]
                ]
            },
           {
                index: 2,
                id:"vr smart car",
                color: [
                    [0.0627, 0.1725, 0.1451],
                    [0.149, 0.2157, 0.196],
                    [0.1176, 0.2118, 0.212]
                  
                ]
            },
           {
                index: 3,
                id:"bytedance interactive motion",
                color: [
                    [0.216, 0.36, 0.756],
                    [0.4471, 0.7804, 0.7451],
                    [0.304, 0.572, 0.856]
                ]
            },
            {
                index: 4,
                id:"music station",
                color: [
                    [0.6471, 0.7373, 0.8667],
                    [0.5137, 0.4314, 0.8],
                    [0.6471, 0.4824, 0.8392]
                ]
            },
            {
                index: 5,
                id:"you in my eyes",
                color: [
                    [0.5686, 0.3647, 0.4549],
                    [0.8275, 0.7529, 0.5373],
                    [0.9529, 0.6039, 0.6275] 
                ]
            },
            {
                index: 6,
                id:"perfect ear",
                color: [
                    [0.1569, 0.1059, 0.1804],
                    [0.5255, 0.3725, 0.1373],
                    [0.3686, 0.2588, 0.4941] 
                ]
            },
           
            {
                index: 7,
                id:"arctic",
                color: [
                    [0.5019, 0.6274, 0.6667],
                    [0.7137, 0.6824, 0.549],
                    [1.0, 0.9137, 0.8196]
                ],
            },
            {
                index: 8,
                id:"blessing lantern",
                color: [
                    [0.9529, 0.5254, 0.3882],
                    [0.9451, 0.6549, 0.3804],
                    [0.8588, 0.4118, 0.251]   

                    
                ]
            },
            {
                index: 9,
                id:"blue desert disco",
                color: [
                    [0.5059, 0.1607, 0.2823],
                    [0.7450, 0.7137, 0.7607],
                    [0.2627, 0.3019, 0.4039]

                ]
            },
        ];
    }
    setDefaultColor(colorIndex){
        let c = this.colorPatternList.find(item => {
            return item.index == colorIndex
        }).color;
        this.current[0]=[...c[0]];
        this.current[1]=[...c[1]];
        this.current[2]=[...c[2]];

        this.target = this.colorPatternList.find(item => {
            return item.index == colorIndex
        }).color;
    }
    setTargetColor(colorIndex) {
        this.target = this.colorPatternList.find(item => {
            return item.index == colorIndex
        }).color;
    }
    update() {
        
        let d = this.target[0][0] - this.current[0][0];
        this.switch = Math.abs(d) > 0.01;
        if (this.switch == true) {
            //for each color in the current color pattern
            this.current.forEach((color, index) => {
                // for each color channels of each color in the current color pattern
                color.forEach((channel, i) => {
                    this.current[index][i] = BGColor.getTransValue(channel, this.target[index][i]);
                });
            })
        }
    }

    static getTransValue(current, target) {
        let d = target - current;
        return Math.abs(d) > 0.01 ? current + (d) * 0.1 : target;
    }
    // static getTransColor(progress, start, end) { //RGB
    //     let r = start[0] + (end[0] - start[0]) * progress;
    //     let g = start[1] + (end[1] - start[1]) * progress;
    //     let b = start[2] + (end[2] - start[2]) * progress;
    //     return [r, g, b];
    // }
}

let mouse_xy = [0, 0];
let x = 0;
let y = 0;

let bgColor = new BGColor();
let defaultColIndex = Number(canvas.classList[1].slice(-1));
bgColor.setDefaultColor(defaultColIndex);

// check if element is in view
function inView(element) {
    var windowHeight = window.innerHeight;
    // get number of pixels that the document is scrolled
    var scrollY = window.scrollY || window.pageYOffset;
    // get current scroll position (distance from the top of the page to the bottom of the current viewport)
    var scrollPosition = scrollY + 1.3*windowHeight;// 
    // get element position (distance from the top of the page to the bottom of the element)
    var elementPosition = element.getBoundingClientRect().top + scrollY + element.clientHeight;
    // is scroll position greater than element position? (is element in view?)
    if (scrollPosition  > elementPosition - 0.5*element.clientHeight) {
        return true;
    }
    return false;
}

function updateBGColor() {
    projects.forEach((e, index) => {
        if (inView(e)) {
            console.log(index);
            bgColor.setTargetColor(index+1);
        }
    });
    if(!inView(projects[0])){
        bgColor.setTargetColor(0);
        console.log("setTargetColor(0)");
    }
}

async function main() {
    document.addEventListener('scroll', updateBGColor);
    document.addEventListener('mousemove', event => {
        mouse_xy = [event.clientX*0.6, event.clientY-90.];
    });

    // create the context
    const gl = canvas.getContext('webgl');
    //Source = await fetch("./shader.frag").then((r)=>r.text());
    const shaderProgram = initShaderProgram(gl, VS_SOURCE, FS_SOURCE);

    //////////////////////////////////////////////
    // query the shaders for attibute and uniform locations
    const vertex_position_location = gl.getAttribLocation(shaderProgram, 'aVertexPosition');
    const u_mouse_location = gl.getUniformLocation(shaderProgram, "u_mouse");
    const u_time_location = gl.getUniformLocation(shaderProgram, "u_time");
    const u_resolution_location = gl.getUniformLocation(shaderProgram, "u_resolution");
    const u_color1_location = gl.getUniformLocation(shaderProgram, "u_color1");
    const u_color2_location = gl.getUniformLocation(shaderProgram, "u_color2");
    const u_color3_location = gl.getUniformLocation(shaderProgram, "u_color3");


    //create the rectangle data, buffer it on video card
    //and tell the shaders about it
    const position_buffer = gl.createBuffer(); //分配一块显存（所谓的buffer）用来存储顶点数据
    gl.bindBuffer(gl.ARRAY_BUFFER, position_buffer);
    const positions = [
        1.0, 1.0, // // right top
        -1.0, 1.0, // // left top
        1.0, -1.0, // // right bottom
        -1.0, -1.0, // // left bottom
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);
    gl.vertexAttribPointer(vertex_position_location, 2, gl.FLOAT, false, 0, 0);
    gl.enableVertexAttribArray(vertex_position_location);


    // configure gl
    gl.enable(gl.DEPTH_TEST);
    gl.depthFunc(gl.LEQUAL);

    // draw 

    // // clear the background
    gl.clearColor(0.0, 0.0, 0.0, 1.0);
    gl.clearDepth(1.0);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    // draw the geometry with our shaders
    gl.useProgram(shaderProgram);
    //gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

    // set up animation loop
    let start_time = Date.now();

    function render() {
        // activate our program
        gl.useProgram(shaderProgram);

        // update uniforms
        let easing = 0.09;
        let dx = mouse_xy[0] - x;
        let dy = mouse_xy[1] - y;


        x = Math.abs(dx) > 0.05 ? x + dx * easing : mouse_xy[0];
        y = Math.abs(dx) > 0.05 ? y + dy * easing : mouse_xy[1];

        gl.uniform2fv(u_mouse_location, [x, y]);
        gl.uniform2fv(u_resolution_location, [window.innerWidth, window.innerHeight]);
        gl.uniform1f(u_time_location, (Date.now() - start_time) * .001);
        gl.uniform3fv(u_color1_location, [...bgColor.current[0]]);
        gl.uniform3fv(u_color2_location, [...bgColor.current[1]]);
        gl.uniform3fv(u_color3_location, [...bgColor.current[2]]);

        bgColor.update();

        // draw the geometry
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        requestAnimationFrame(render);
    }

    requestAnimationFrame(render);
}



//Easing Funnction
//https://spicyyoghurt.com/tools/easing-functions#easinglist


main();
</script></body></html>
