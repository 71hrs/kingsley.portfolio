<!DOCTYPE html>

<html data-wf-domain="www.yuhuiqi.com">
	<head>
        <link rel="stylesheet" href="https://use.typekit.net/wvs7ihr.css"> 
        <!--font-family: "futura-pt", sans-serif; font-weight: 600; font-style: normal;-->
        <!--font-family: "linotype-didot", serif; font-weight: 700; font-style: normal;-->
		<meta charset="utf-8">
		<title>
			Organisms Utopia
		</title>
		<meta content="width=device-width, initial-scale=1" name="viewport">
		<link href="static/css/project-page.css" rel="stylesheet" type="text/css">
	</head>

	<body class="works-block-body">

        <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navigation-bar w-nav">
            <div class="navbar-container w-container">
                <a href="index.html" class="brand-link w-nav-brand">
                    <div class="nav-brand-link">
                        YUHUI
                    </div>
                </a>
                <nav role="navigation" class="navigation-menu w-nav-menu">
                    <a href="index.html" class="navigation-link w-nav-link">
                        works
                    </a>
                    <a href="playground.html" class="navigation-link w-nav-link">
                        playground
                    </a>
                    <a href="https://drive.google.com/file/d/1GDh7A0q2EPbzfSmEoDu2TpZeVoKFcZbh/view?usp=sharing" target="_blank" class="navigation-link w-nav-link">
                        resume
                    </a>    
                    <a href="about.html" class="navigation-link w-nav-link">
                        About
                    </a>
                </nav>
                <div class="hamburger-button w-nav-button">
                    <div class="icon w-icon-nav-menu">
                    </div>
                </div>
            </div>
        </div>

		<div class="bgcanvas">
			<div class="w-embed">
				<canvas class="bgCanvas project1" id="glcanvas">
				</canvas>
			</div>
		</div>


		<header class="project-page-hero wf-section">
			<div class="project-title-container">
				<div class="project-hero-title">
					Organisms Utopia
				</div>
			</div>
			<div class="project-infocol-container w-row">
				<div class="column-projectinfo w-col w-col-5">
					<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a82a-bd42a7ff" class="project-hero-intro">
						Have you ever thought about the underwater world of the future?
						<br>
						<br>
					</div>
					<div class="project-metainfo w-row">
						<div class="w-col w-col-6 w-col-small-6 w-col-tiny-6">
							<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a805-bd42a7ff" class="project-metainfo-container">
								<div class="project-metainfo-tag">
									Type
								</div>
								<div class="project-metainfo-data">
									Spectulative Design<br>Concept Design<br>Visual Design<br>3D Modeling
								</div>
							</div>
							<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a80e-bd42a7ff" class="project-metainfo-container">
								<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a80f-bd42a7ff" class="project-metainfo-tag">
									Tools
								</div>
								<div class="project-metainfo-data">
									Figma<br>Adobe Illustrator<br>Adobe Photoshop<br>ZBrush<br>Adobe Premiere Pro<br>Adobe Audition
								</div>
							</div>
						</div>
						<div class="w-col w-col-6 w-col-small-6 w-col-tiny-6">
							<div id="w-node-e78d55f6-6348-f943-6fa2-162ebd42a817-bd42a7ff" class="project-metainfo-container">
								<div color="#00FFFF" class="project-metainfo-tag">
									Year
								</div>
								<div class="project-metainfo-data">
									2024
									<br><br>
								</div>
							</div>
							<div class="project-metainfo-container">
								<div class="project-metainfo-tag">
									Role
								</div>
								<div class="project-metainfo-data">
									Visual Design<br>3D Modeling<br>Video Editing
									<br><br>
								</div>
							</div>
							<!--<div class="project-metainfo-container">
								<div class="project-metainfo-tag">
									Collaborator
								</div>
								<div class="project-metainfo-data">
									Yongning Ding
								</div>
							</div>-->
						</div>
					</div>
				</div>
				<div class="column-projectcover w-col w-col-7">
					<img src="static/picture/organism-utopia-cover.png" loading="lazy"
					alt="" sizes="(max-width: 479px) 67vw, (max-width: 767px) 83vw, (max-width: 991px) 50vw, (max-width: 5714px) 56vw, 3200px"
					class="project-coverimg">
				</div>
			</div>
		</header>





























        <div class="page-container"  style="padding-top: 100px;">

            <div class="page-unit"> 
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 01 <span style="color: rgb(89, 39, 239);"> OVERVIEW </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    In this new era where the oceans dominate 95% of the planet, humanity has undergone an evolutionary shift, establishing a thriving civilization beneath the deep sea. This underwater society represents a novel species, embracing a unique way of life. Here, all life forms are regarded as equals, fostering a symbiotic relationship that transcends traditional boundaries.
                    <br><br>
                    Through centuries of evolution, certain organisms have developed a profound connection with the oceanic humans, acting as external "organs" that coexist and thrive alongside the human body, forming a harmonious symbiosis. This symbiosis is characterized by cellular communion, allowing these organisms to enhance the bodily functions of the oceanic humans, while benefiting from the human lifestyle in return.
                    <br><br>
                    The mutualistic relationship extends beyond mere survival, enabling the organisms to aid in their own species' reproduction and continued existence. This era heralds a paradigm shift towards coexistence and mutual prosperity, paving the way for a harmonious future where the oceanic people and marine life coexist in a balanced and equitable manner, emphasizing equality and harmony among species.
                    <br><br>
                    Envisioning a possible future utopian world and showing the possible future, thinking about the redefinition of life, and how the world's reincarnation should continue to flourish – as we return to the beginning of all life on Earth, the ocean.
                 </div>
            </div>

            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-scene-01.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-scene-02.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-scene-03.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 02 <span style="color: rgb(89, 39, 239);"> CONCEPT </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Embedded within this vision is "Organisms Utopia," a speculative design endeavor exploring a groundbreaking paradigm of symbiosis between humanity and Earth's biosphere underwater. It envisions a harmonious symbiotic relationship between humans and the diverse array of life forms on our planet. This project delves into the potential of a utopian future where life flourishes within balanced ecosystems, illustrating how symbiosis between humans and nature can redefine our relationship with the Earth, fostering a harmonious coexistence that benefits all inhabitants of our planet.
                    <br><br>
                    In this new utopian world, certain organisms have gradually emerged that can establish a symbiotic relationship with the new oceanic humans. They grow in different habitats in the ocean, each with its own unique characteristics. These organisms, while endowing the new oceanic humans with different abilities, also fulfill some of their needs from oceanic human. 
                    <br><br>
                    "Organisms Utopia" employs wearable art as a medium, utilizing cutting-edge technologies such as 3D printing, heat-shrinkable sheets, and UV resin to handcraft experimental components for wearable art pieces. These art pieces are meticulously designed to be worn on the head, shoulders, arms, and hands, equipped with various sensors to simulate the sensory experiences of future underwater organisms parasitizing humans. The project aims to convey visual and emotional experiences to its audience, sparking profound reflections and discussions on the relationship between natural organisms and human existence.                </div>
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 03 <span style="color: rgb(89, 39, 239);"> INITIAL SKETCH </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Here is the inception of my ideas: initial sketches that mark the beginning of my creative journey.
                 </div>
            </div>

            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-initial-sketch.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>

        </div>
            

        <div class="page-container">
            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                     / 04 <span style="color: rgb(89, 39, 239);"> DETAILED SKETCH </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Below are sketches and profiles of four envisioned future marine organisms.
                </div>
            </div>

            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-immuno.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-oxyflora.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-neutide.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-aquaaura.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 05 <span style="color: rgb(89, 39, 239);"> 3D MODELING </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Below are conceptual 3D models of four future marine organisms, along with renderings depicting their symbiotic integration with humans.                </div>
            </div>

            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-3d-immuno.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-3d-oxyflora.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-3d-neutide.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>
            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-3d-aquaaura.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 06 <span style="color: rgb(89, 39, 239);"> HABITAT CONCEPT MAP </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Below is a conceptual map illustrating the primary habitat distributions of four envisioned future marine species.                </div>
            </div>

            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-habitat.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 07 <span style="color: rgb(89, 39, 239);"> SUSTAINABILITY </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    Sustainability is prioritized in the "Organisms Utopia" project through the consideration of material selection, production processes, and design lifecycle. Sustainable materials such as biodegradable polymers or recycled plastics are selected for 3D printing to mitigate resource dependency and minimize environmental footprint. Also, wearable art pieces are designed for durability and flexibility, adapting to diverse needs. Through these efforts, we aim to minimize our project's ecological footprint and contribute to a sustainable future.                </div>
            </div>

            <div style="flex: 1; display: flex; justify-content: center;">
                <img src="static/picture/organisms-utopia-display.png" style="width: 94.5%; height: auto; padding-top:50px; ">
            </div>

            <div class="page-unit" style="padding-top: 100px;">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 08 <span style="color: rgb(89, 39, 239);"> COLLABORATION </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    In the evolution of the "Organisms Utopia" project, we've established collaborations with experts in the fields of biology and environmental science. They offered invaluable insights into marine biology and ecosystems, aiding our design team in comprehending the behavior, traits, and ecological context of underwater organisms, as well as essential information on parasitic relationships, symbiotic relationships, and biodiversity. This collaboration has guided the development of wearable art pieces, seamlessly integrating the authenticity of real-world ecological systems into our speculative design. Through our partnership with the fields of biology and environmental science, the "Organisms Utopia" project is poised to more accurately portray the vision of a future utopia, thus prompting profound reflections on future utopian symbiotic coexistence.
                </div>
            </div>

            <div class="page-unit" style="padding-top: 100px; padding-bottom:50px; ">
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    / 09 <span style="color: rgb(89, 39, 239);"> THOUGHTS </span>
                </div>
                <div class="page-sec" style="font-family: futura-pt, sans-serif; font-weight: 600; font-style: normal;">
                    The symbiotic model introduced in the "Organisms Utopia" project is intended to evoke deep contemplation and reassessment of the interconnectedness between humanity and other organisms. Delving into this symbiotic paradigm would compel a profound reflection on the essence, significance, and potential evolution of life, also foster a profound sense of awe and responsibility towards life, urging a reexamination of the roles and contributions humanity should undertake within Earth's ecosystem.
                    <br><br>
                    Life transcends mere individual existence; it extends beyond personal relationships to encompass the delicate balance and stability of the entire ecosystem. As part of the ecosystem, humanity should play a role that is responsible and humble. Humans have a duty to protect and preserve the planet's biodiversity and ecosystems to ensure sustainable development for the future. This entails respecting the power and influence of nature and striving to coexist harmoniously with it, rather than attempting to dominate and control it. By recognizing and honoring nature's intrinsic value, humans can establish a symbiotic relationship with the natural world, thus contributing to the maintenance of the balance and stability of Earth's ecosystems.
                    <br><br>
                    The challenges of the real world compound the complexity of realizing the utopian vision where humanity and nature coexist harmoniously, mutually dependent within an ideal ecosystem. Whether humanity can progressively establish symbiotic relationships with nature in the future through collective efforts such as shifting values, embracing sustainable practices, and leveraging technological innovation remains uncertain. However, what is certain is that our contemplation and yearning for this utopian future will undoubtedly underpin a more balanced and harmonious coexistence between humans and nature. As designers, we consistently act as trailblazers along this trajectory...                 </div>
            </div>

            <div style="padding:56.25% 0 0 0;position:relative;">
                <iframe src="https://player.vimeo.com/video/937945326?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="Organisms Utopia"></iframe>
            </div>
            <script src="https://player.vimeo.com/api/player.js"></script>

        </div>




























        
		<div class="footer wf-section">
			<div class="footer-text">
				Copyright © YUHUI QI 2023
			</div>
		</div>



		<script src="static/js/jquery-3.5.1.min.dc5e7f18c8.js" type="text/javascript"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
		</script>
		<script src="static/js/webflow.87852ad41.js" type="text/javascript">
		</script>



		<script>
		const canvas = document.querySelector('.bgCanvas');

console.log(canvas.classList[1]);
let projects = document.querySelectorAll(".project-li");

canvas.width = window.innerWidth;
  //if canvas.classList.include("project"),canvas.height=window.innerHeight*1.3;
canvas.height = window.innerHeight*1.24;

//////////////////////////////////////////////
// vertex shader program 
const VS_SOURCE = `
    precision highp float;
    
    attribute vec4 aVertexPosition;
    
    void main(void) {
      gl_Position = aVertexPosition;
    }
`;

//////////////////////////////////////////////
//  fragment shader program
const FS_SOURCE = `
precision highp float;

uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;
uniform vec3 u_color1;
uniform vec3 u_color2;
uniform vec3 u_color3;


vec3 mod289(vec3 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec2 mod289(vec2 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec3 permute(vec3 x) {
    return mod289(((x * 34.0) + 1.0) * x);
}
vec2 random2(vec2 st) {
    st = vec2(dot(st, vec2(97.1, 311.7)),
        dot(st, vec2(69.5, 183.3)));

    return -1.0 + 2.0 * fract(sin(st) * 43758.5453123);
}

float map(float value, float min1, float max1, float min2, float max2) {
    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float snoise(vec2 v) {
    const vec4 C = vec4(0.211324865405187, // (3.0-sqrt(3.0))/6.0
        0.366025403784439, // 0.5*(sqrt(3.0)-1.0)
        -0.577350269189626, // -1.0 + 2.0 * C.x
        0.024390243902439); // 1.0 / 41.0
    vec2 i = floor(v + dot(v, C.yy));
    vec2 x0 = v - i + dot(i, C.xx);
    vec2 i1;
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;
    i = mod289(i); // Avoid truncation effects in permutation
    vec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0)) +
        i.x + vec3(0.0, i1.x, 1.0));

    vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);
    m = m * m;
    m = m * m;
    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;
    m *= 1.79284291400159 - 0.85373472095314 * (a0 * a0 + h * h);
    vec3 g;
    g.x = a0.x * x0.x + h.x * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

void main() {
    vec2 st = gl_FragCoord.xy / u_resolution.xy;
    st.x *= u_resolution.x / u_resolution.y;
    st.y += 0.5;

    vec3 color = vec3(0.625, 0.205, 0.235);
    float xoff = snoise(st + u_time * .015) * u_mouse.y / u_resolution.y * 0.1;
    vec2 pos = vec2(st * vec2(1., 2.2) * map(u_mouse.x, 0., u_resolution.x, 0.3, 0.4));


    float DF = 0.;

    // Add a random position
    vec2 vel = vec2(20.3, 0.6);
    DF += snoise(pos + vel) * map(u_mouse.x, 0., u_resolution.x, 0.2, 0.8);

    // Add a random position
    vel = vec2(u_mouse / u_resolution * 0.9);
    DF += snoise(pos + vel) * map(u_mouse.x, 0., u_resolution.x, 0.1, 0.8);
    DF += 0.37;
    vec3 color0 = vec3(0.0, 0.0, 0.0);
    vec3 color1 = vec3(0.9529, 0.3647, 0.1333);
    vec3 color2 = vec3(0.6902, 0.7255, 0.6549);
    vec3 color3 = vec3(0.1765, 0.3333, 0.7608);

    color = mix(color0, u_color1, smoothstep(0.1, 0.4, DF));
    color = mix(color, u_color2, smoothstep(0.3, 0.5, DF));
    color = mix(color, u_color3, smoothstep(0.4, 0.6, DF));
    color = mix(color, color0, smoothstep(0.4, 0.8, DF));


    //  color = vec3(smoothstep(.5, .75, fract(DF)));
    color += vec3(snoise(random2(st)) * 0.05);
    //color *= 0.1;


    gl_FragColor = vec4(color, 1.0);
}
`;


function initShaderProgram(gl, vsSource, fsSource) {
    const vertexshader = loadShader(gl, gl.VERTEX_SHADER, vsSource);
    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fsSource);

    // Create the shader program and link fragment and vertex shader
    const shaderProgram = gl.createProgram();
    gl.attachShader(shaderProgram, vertexshader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    // If creating the shader program failed, alert
    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));
        return null;
    }
    return shaderProgram;
}
function loadShader(gl, type, source) {
    const shader = gl.createShader(type);

    // Send the source to the shader object
    gl.shaderSource(shader, source);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));
        gl.deleteShader(shader);
        return null;
    }
    return shader;
}
  
class BGColor {
    constructor() {
        this.switch = false;
     
        //current color pattern with three colors
        this.current = [
           // [0.9529, 0.3647, 0.1333],
           // [0.6902, 0.7255, 0.6549],
           // [0.1765, 0.3333, 0.7608]
             [0.7333, 0.302, 0.1451],
                    [0.5098, 0.6824, 0.5765],
                    [0.0941, 0.1294, 0.2627]
        ];
        this.target = [
          //  [0.9529, 0.3647, 0.1333],
          //  [0.6902, 0.7255, 0.6549],
          //  [0.1765, 0.3333, 0.7608]
             [0.7333, 0.302, 0.1451],
                    [0.5098, 0.6824, 0.5765],
                    [0.0941, 0.1294, 0.2627]
        ];
        //static
        this.colorPatternList = [
            {
                index: 0,//defualt
                id:"default",
                color: [
                    // [0.9529, 0.3647, 0.1333],
                    // [0.6902, 0.7255, 0.6549],
                    // [0.1765, 0.3333, 0.7608]
                    [0.7333, 0.302, 0.1451],
                    [0.5098, 0.6824, 0.5765],
                    [0.0941, 0.1294, 0.2627]
                ]
            },
          
            {
                index: 1,
                id:"mindful mood space",
                color: [
                    [0.233, 0.193, 0.241],
                    [0.203, 0.181, 0.246],
                    [0.114, 0.140, 0.218]
                ]
            },
           {
                index: 2,
                id:"vr smart car",
                color: [
                    [0.0627, 0.1725, 0.1451],
                    [0.149, 0.2157, 0.196],
                    [0.1176, 0.2118, 0.212]
                  
                ]
            },
           {
                index: 3,
                id:"bytedance interactive motion",
                color: [
                    [0.216, 0.36, 0.756],
                    [0.4471, 0.7804, 0.7451],
                    [0.304, 0.572, 0.856]
                ]
            },
            {
                index: 4,
                id:"music station",
                color: [
                    [0.6471, 0.7373, 0.8667],
                    [0.5137, 0.4314, 0.8],
                    [0.6471, 0.4824, 0.8392]
                ]
            },
            {
                index: 5,
                id:"you in my eyes",
                color: [
                    [0.5686, 0.3647, 0.4549],
                    [0.8275, 0.7529, 0.5373],
                    [0.9529, 0.6039, 0.6275] 
                ]
            },
            {
                index: 6,
                id:"perfect ear",
                color: [
                    [0.1569, 0.1059, 0.1804],
                    [0.5255, 0.3725, 0.1373],
                    [0.3686, 0.2588, 0.4941] 
                ]
            },
           
            {
                index: 7,
                id:"arctic",
                color: [
                    [0.5019, 0.6274, 0.6667],
                    [0.7137, 0.6824, 0.549],
                    [1.0, 0.9137, 0.8196]
                ],
            },
            {
                index: 8,
                id:"blessing lantern",
                color: [
                    [0.9529, 0.5254, 0.3882],
                    [0.9451, 0.6549, 0.3804],
                    [0.8588, 0.4118, 0.251]   

                    
                ]
            },
            {
                index: 9,
                id:"blue desert disco",
                color: [
                    [0.5059, 0.1607, 0.2823],
                    [0.7450, 0.7137, 0.7607],
                    [0.2627, 0.3019, 0.4039]

                ]
            },
        ];
    }
    setDefaultColor(colorIndex){
        let c = this.colorPatternList.find(item => {
            return item.index == colorIndex
        }).color;
        this.current[0]=[...c[0]];
        this.current[1]=[...c[1]];
        this.current[2]=[...c[2]];

        this.target = this.colorPatternList.find(item => {
            return item.index == colorIndex
        }).color;
    }
    setTargetColor(colorIndex) {
        this.target = this.colorPatternList.find(item => {
            return item.index == colorIndex
        }).color;
    }
    update() {
        
        let d = this.target[0][0] - this.current[0][0];
        this.switch = Math.abs(d) > 0.01;
        if (this.switch == true) {
            //for each color in the current color pattern
            this.current.forEach((color, index) => {
                // for each color channels of each color in the current color pattern
                color.forEach((channel, i) => {
                    this.current[index][i] = BGColor.getTransValue(channel, this.target[index][i]);
                });
            })
        }
    }

    static getTransValue(current, target) {
        let d = target - current;
        return Math.abs(d) > 0.01 ? current + (d) * 0.1 : target;
    }
    // static getTransColor(progress, start, end) { //RGB
    //     let r = start[0] + (end[0] - start[0]) * progress;
    //     let g = start[1] + (end[1] - start[1]) * progress;
    //     let b = start[2] + (end[2] - start[2]) * progress;
    //     return [r, g, b];
    // }
}

let mouse_xy = [0, 0];
let x = 0;
let y = 0;

let bgColor = new BGColor();
let defaultColIndex = Number(canvas.classList[1].slice(-1));
bgColor.setDefaultColor(defaultColIndex);

// check if element is in view
function inView(element) {
    var windowHeight = window.innerHeight;
    // get number of pixels that the document is scrolled
    var scrollY = window.scrollY || window.pageYOffset;
    // get current scroll position (distance from the top of the page to the bottom of the current viewport)
    var scrollPosition = scrollY + 1.3*windowHeight;// 
    // get element position (distance from the top of the page to the bottom of the element)
    var elementPosition = element.getBoundingClientRect().top + scrollY + element.clientHeight;
    // is scroll position greater than element position? (is element in view?)
    if (scrollPosition  > elementPosition - 0.5*element.clientHeight) {
        return true;
    }
    return false;
}

function updateBGColor() {
    projects.forEach((e, index) => {
        if (inView(e)) {
            console.log(index);
            bgColor.setTargetColor(index+1);
        }
    });
    if(!inView(projects[0])){
        bgColor.setTargetColor(0);
        console.log("setTargetColor(0)");
    }
}

async function main() {
    document.addEventListener('scroll', updateBGColor);
    document.addEventListener('mousemove', event => {
        mouse_xy = [event.clientX*0.6, event.clientY-90.];
    });

    // create the context
    const gl = canvas.getContext('webgl');
    //Source = await fetch("./shader.frag").then((r)=>r.text());
    const shaderProgram = initShaderProgram(gl, VS_SOURCE, FS_SOURCE);

    //////////////////////////////////////////////
    // query the shaders for attibute and uniform locations
    const vertex_position_location = gl.getAttribLocation(shaderProgram, 'aVertexPosition');
    const u_mouse_location = gl.getUniformLocation(shaderProgram, "u_mouse");
    const u_time_location = gl.getUniformLocation(shaderProgram, "u_time");
    const u_resolution_location = gl.getUniformLocation(shaderProgram, "u_resolution");
    const u_color1_location = gl.getUniformLocation(shaderProgram, "u_color1");
    const u_color2_location = gl.getUniformLocation(shaderProgram, "u_color2");
    const u_color3_location = gl.getUniformLocation(shaderProgram, "u_color3");


    //create the rectangle data, buffer it on video card
    //and tell the shaders about it
    const position_buffer = gl.createBuffer(); //分配一块显存（所谓的buffer）用来存储顶点数据
    gl.bindBuffer(gl.ARRAY_BUFFER, position_buffer);
    const positions = [
        1.0, 1.0, // // right top
        -1.0, 1.0, // // left top
        1.0, -1.0, // // right bottom
        -1.0, -1.0, // // left bottom
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);
    gl.vertexAttribPointer(vertex_position_location, 2, gl.FLOAT, false, 0, 0);
    gl.enableVertexAttribArray(vertex_position_location);


    // configure gl
    gl.enable(gl.DEPTH_TEST);
    gl.depthFunc(gl.LEQUAL);

    // draw 

    // // clear the background
    gl.clearColor(0.0, 0.0, 0.0, 1.0);
    gl.clearDepth(1.0);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    // draw the geometry with our shaders
    gl.useProgram(shaderProgram);
    //gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

    // set up animation loop
    let start_time = Date.now();

    function render() {
        // activate our program
        gl.useProgram(shaderProgram);

        // update uniforms
        let easing = 0.09;
        let dx = mouse_xy[0] - x;
        let dy = mouse_xy[1] - y;


        x = Math.abs(dx) > 0.05 ? x + dx * easing : mouse_xy[0];
        y = Math.abs(dx) > 0.05 ? y + dy * easing : mouse_xy[1];

        gl.uniform2fv(u_mouse_location, [x, y]);
        gl.uniform2fv(u_resolution_location, [window.innerWidth, window.innerHeight]);
        gl.uniform1f(u_time_location, (Date.now() - start_time) * .001);
        gl.uniform3fv(u_color1_location, [...bgColor.current[0]]);
        gl.uniform3fv(u_color2_location, [...bgColor.current[1]]);
        gl.uniform3fv(u_color3_location, [...bgColor.current[2]]);

        bgColor.update();

        // draw the geometry
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        requestAnimationFrame(render);
    }

    requestAnimationFrame(render);
}



//Easing Funnction
//https://spicyyoghurt.com/tools/easing-functions#easinglist


main();
</script></body></html>
